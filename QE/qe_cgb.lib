LIB "poly.lib";
LIB "primdec.lib";
LIB "qhmoduli.lib";
LIB "teachstd.lib";

LIB "../MCCGB/cgb_mod.lib";
//LIB "../MCCGB/mcgb.lib";

proc qe_cgb(ideal E, ideal N1, ideal N2) {
  // Operations are performed in the ring @R_QE.
  if (defined(@R_QE)) {
    kill @R_QE;
  }

  if (defined(@P_QE)) {
    kill @P_QE;
  }

  if (defined(@RP_QE)) {
    kill @RP_QE;
  }

  int num_erst_aux = size(N1);
  int num_zweite_aux = size(N2);

  def BR = basering;
  def BR_list = ringlist(BR);

  def @R_QE = ring(extend_ring_with_zwei_aux(BR_list), num_erst_aux, num_zweite_aux);
  
}

proc extend_ring_with_zwei_aux(list ring_list, int n1, int n2) {
  int i;
  list aux1_list;
  list ring_new_list = ring_list;
  string aux_name;
  for (i = 1; i <= n1; i++) {
    aux_name = "auxU" + string(i);
    aux1_list = insert(aux1_list, aux_name, size(aux1_list));
  }

  list aux2_list;
  for (i = 1; i <= n2; i++) {
    aux_name = "auxW" + string(i);
    aux2_list = insert(aux2_list, aux_name, size(aux2_list));
  }

  list var_list = ring_list[2];
  int nVar = size(var_list);
  string ord_var = ring_list[3][1][1];

  ring_new_list[2] = aux1_list + aux2_list + var_list;

  // For orderings.
  
}
